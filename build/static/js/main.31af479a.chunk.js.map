{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","components/Message.js","services/persons.js","App.js","index.js"],"names":["Filter","search","setSearch","value","onChange","e","target","PersonForm","addPerson","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","Persons","person","handleDelete","name","number","onClick","Message","message","messageStyle","includes","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","style","baseUrl","personService","getAll","axios","get","then","response","data","create","newPerson","post","remove","id","delete","update","put","App","useState","persons","setPersons","setNewName","setNewNumber","setMessage","useEffect","initialData","catch","error","setTimeout","preventDefault","isAlreadyAdded","find","window","confirm","console","log","changedPerson","updatedPerson","map","createdPerson","filter","p","toLowerCase","afterDeletePerson","handleDeleteOf","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.31af479a.chunk.js","sourcesContent":["import React from \"react\";\n\nconst Filter = ({ search, setSearch }) => {\n  return (\n    <form>\n      <div>\n        name:{\" \"}\n        <input value={search} onChange={(e) => setSearch(e.target.value)} />\n      </div>\n    </form>\n  );\n};\n\nexport default Filter;\n","import React from \"react\";\n\nconst PersonForm = ({\n  addPerson,\n  newName,\n  handleNameChange,\n  newNumber,\n  handleNumberChange,\n}) => {\n  return (\n    <form onSubmit={addPerson}>\n      <div>\n        name: <input value={newName} onChange={handleNameChange} />\n      </div>\n      <div>\n        number: <input value={newNumber} onChange={handleNumberChange} />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  );\n};\n\nexport default PersonForm;\n","import React from \"react\";\n\nconst Persons = ({ person, handleDelete }) => {\n  return (\n    <>\n      {person.name} {person.number}\n      <button onClick={handleDelete}>Delete</button>\n    </>\n  );\n};\n\nexport default Persons;\n","import React from \"react\";\n\nconst Message = ({ message }) => {\n  let messageStyle = {};\n\n  if (message !== null) {\n    if (message.includes(\"[error]\")) {\n      messageStyle = {\n        color: \"red\",\n        background: \"lightgrey\",\n        fontSize: \"20px\",\n        borderStyle: \"solid\",\n        borderRadius: 5,\n        padding: 10,\n        marginBottom: 10,\n      };\n    } else {\n      messageStyle = {\n        color: \"green\",\n        background: \"lightgrey\",\n        fontSize: \"20px\",\n        borderStyle: \"solid\",\n        borderRadius: 5,\n        padding: 10,\n        marginBottom: 10,\n      };\n    }\n  } else {\n    messageStyle = {};\n  }\n\n  return <div style={messageStyle}>{message}</div>;\n};\n\nexport default Message;\n","import axios from \"axios\";\n\nconst baseUrl = \"/api/persons\";\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then((response) => {\n    return response.data;\n  });\n};\n\nconst create = (newPerson) => {\n  const request = axios.post(baseUrl, newPerson);\n  return request.then((response) => response.data);\n};\n\nconst remove = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`);\n  return request.then((response) => response);\n};\nconst update = (newPerson, id) => {\n  const request = axios.put(`${baseUrl}/${id}`, newPerson);\n  return request.then((response) => response.data);\n};\n\nconst personService = { getAll, create, remove, update };\n\nexport default personService;\n","import React, { useState, useEffect } from \"react\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport Message from \"./components/Message\";\nimport personService from \"./services/persons\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [message, setMessage] = useState(null);\n\n  const [search, setSearch] = useState(\"\");\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then((initialData) => {\n        setPersons(initialData);\n      })\n      .catch((error) => {\n        setMessage(`[error] Couldn't Get Data from the Server`);\n        setTimeout(() => {\n          setMessage(null);\n        }, 3000);\n      });\n  }, []);\n\n  const addPerson = (e) => {\n    e.preventDefault();\n    const isAlreadyAdded = persons.find((person) => person.name === newName);\n\n    if (isAlreadyAdded) {\n      if (\n        window.confirm(\n          `${newName} is already added to phonebook, replace the old number with a new one?`\n        )\n      ) {\n        console.log(newName);\n        const newPerson = {\n          name: newName,\n          number: newNumber,\n        };\n\n        const person = persons.find((person) => person.id === newName.id);\n        const changedPerson = { ...person, number: newName.number };\n\n        personService\n          .update(newPerson, isAlreadyAdded.id)\n          .then((updatedPerson) => {\n            setPersons(\n              persons.map((person) =>\n                person.id === newPerson.id ? changedPerson : person\n              )\n            );\n            setMessage(`New Number added to ${newName}`);\n            setTimeout(() => {\n              setMessage(null);\n            }, 3000);\n          })\n          .catch((error) => {\n            setMessage(\n              `[error] ${newPerson.name} has already been removed from server`\n            );\n            setTimeout((error) => {\n              setMessage(null);\n            }, 3000);\n          });\n      }\n    } else {\n      const newPerson = {\n        name: newName,\n        number: newNumber,\n      };\n\n      personService\n        .create(newPerson)\n        .then((createdPerson) => {\n          setPersons(createdPerson);\n\n          setMessage(`Added ${newName}`);\n          setTimeout(() => {\n            setMessage(null);\n          }, 3000);\n        })\n        .catch((error) => {\n          console.log(error);\n          setMessage(`[error] Couldn't add ${newName} to the server`);\n          setTimeout(() => {\n            setMessage(null);\n          }, 3000);\n        });\n    }\n\n    setNewName(\"\");\n    setNewNumber(\"\");\n  };\n\n  const handleNameChange = (e) => {\n    setNewName(e.target.value);\n  };\n  const handleNumberChange = (e) => {\n    setNewNumber(e.target.value);\n  };\n\n  const handleDeleteOf = ({ id, name }) => {\n    if (window.confirm(`Delete ${name}?`)) {\n      personService\n        .remove(id)\n        .then(() => {\n          setMessage(`${name} was deleted`);\n          setTimeout(() => {\n            setMessage(null);\n          }, 3000);\n        })\n        .catch((error) => {\n          console.log(error);\n          setMessage(`[error] ${name} was already deleted`);\n          setTimeout(() => {\n            setMessage(null);\n          }, 3000);\n        });\n    }\n    const afterDeletePerson = persons.filter((p) => p.name !== name);\n    setPersons(afterDeletePerson);\n  };\n\n  return (\n    <div>\n      <Message message={message} />\n\n      <h2>Phonebook</h2>\n\n      <Filter search={search} setSearch={setSearch} />\n\n      <h2>add a new</h2>\n      <PersonForm\n        addPerson={addPerson}\n        newName={newName}\n        handleNameChange={handleNameChange}\n        newNumber={newNumber}\n        handleNumberChange={handleNumberChange}\n      />\n      <h2>Numbers</h2>\n      {persons\n        .filter((p) => {\n          if (p === \"\") {\n            return p;\n          } else {\n            return p.name.toLowerCase().includes(search.toLowerCase());\n          }\n        })\n        .map((person) => {\n          return (\n            <p key={person.id}>\n              <Persons\n                person={person}\n                handleDelete={() => handleDeleteOf(person)}\n              />\n            </p>\n          );\n        })}\n    </div>\n  );\n};\n\nexport default App;\n","import ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./index.css\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}